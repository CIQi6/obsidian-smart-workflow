/* Obsidian AI File Namer Styles */

/* Animation for the title text effect - Shimmer effect */
@keyframes ai-shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.ai-generating-title {
    background: linear-gradient(90deg,
            var(--text-normal) 0%,
            var(--interactive-accent) 25%,
            var(--interactive-accent-hover) 50%,
            var(--interactive-accent) 75%,
            var(--text-normal) 100%);
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent !important;
    animation: ai-shimmer 2s linear infinite;
}

/* Fallback if background-clip not supported */
@supports not (background-clip: text) {
    .ai-generating-title {
        color: var(--interactive-accent) !important;
        text-shadow: 0 0 10px var(--interactive-accent);
    }
}

/* Settings Tab Navigation Styles */

/* 头部容器 */
.ai-file-namer-settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 0 8px;
}

/* 标签页导航栏 */
.ai-file-namer-tabs {
    display: flex;
    border-bottom: 2px solid var(--background-modifier-border);
    margin-bottom: 10px;
    padding: 0 8px;
}

/* 单个标签 */
.ai-file-namer-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
    color: var(--text-muted);
    transition: all 0.2s ease;
    background: transparent;
    border-left: none;
    border-right: none;
    border-top: none;
}

/* 标签悬停效果 */
.ai-file-namer-tab:hover {
    color: var(--text-normal);
    background-color: var(--background-modifier-hover);
}

/* 激活的标签 */
.ai-file-namer-tab.active {
    color: var(--text-accent);
    border-bottom-color: var(--text-accent);
}

/* 标签图标 */
.ai-file-namer-tab-icon {
    font-size: 16px;
    line-height: 1;
}

/* 内容区域 */
.ai-file-namer-content {
    padding: 0 8px;
    animation: fadeIn 0.2s ease;
}

/* 淡入动画 */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 响应式布局 */
@media screen and (max-width: 1024px) {
    .ai-file-namer-settings-header {
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
}

/* ==================== Terminal Styles ==================== */

/* 工作区叶子内容 - 终端视图 */
.workspace-leaf-content[data-type="terminal-view"] {
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important;
    overflow: hidden !important;
    height: 100% !important;
}

.workspace-leaf-content[data-type="terminal-view"] .view-content {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
    min-height: 0 !important;
    height: 100% !important;
    padding: 0 !important;
    overflow: hidden !important;
}

/* 终端视图主容器 */
.terminal-view-container {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
    min-height: 0 !important;
    height: 100% !important;
    width: 100% !important;
    overflow: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
    background-color: var(--background-primary);
}

/* 终端容器 */
.terminal-container {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
    min-height: 0 !important;
    overflow: hidden !important;
    position: relative !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    background-color: var(--background-primary);
}

/* 终端背景图片层 */
.terminal-background-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

/* 终端实例容器 */
.terminal-instance {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
    min-height: 0 !important;
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
    z-index: 1;
}

/* ==================== Xterm.js 核心样式 ==================== */

/* Xterm 主容器 */
.terminal-container .xterm,
.terminal-instance .xterm {
    position: relative !important;
    flex: 1 !important;
    min-height: 0 !important;
    height: 100% !important;
    width: 100% !important;
    padding: 4px !important;
    cursor: text;
    outline: none;
}

/* Xterm 辅助元素 - 隐藏输入框 */
.xterm-helpers {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5;
    opacity: 0;
    pointer-events: none;
}

.xterm-helper-textarea {
    position: absolute;
    opacity: 0;
    left: -9999px;
    top: -9999px;
    width: 0;
    height: 0;
    z-index: -5;
    white-space: nowrap;
    overflow: hidden;
    resize: none;
    padding: 0;
    border: 0;
    outline: none;
}

/* Xterm 屏幕 */
.xterm-screen {
    position: relative;
    width: 100%;
    height: 100%;
}

/* Xterm 视口（滚动容器） */
.xterm-viewport {
    overflow-y: auto;
    overflow-x: hidden;
    cursor: default;
    position: absolute;
    right: 0;
    left: 0;
    top: 0;
    bottom: 0;
}

/* ==================== 光标样式 ==================== */

/* 光标层 - 确保在最上层 */
.xterm-cursor-layer {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 3 !important;
    pointer-events: none;
}

/* 光标 - 块状光标 */
.xterm-cursor {
    position: absolute;
    background-color: var(--text-accent) !important;
    opacity: 1 !important;
    z-index: 3 !important;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
}

/* 光标闪烁动画 */
.xterm-cursor.xterm-cursor-blink {
    animation: xterm-cursor-blink 1.2s steps(2, start) infinite;
}

@keyframes xterm-cursor-blink {
    0%, 49% {
        opacity: 1;
    }
    50%, 100% {
        opacity: 0;
    }
}

/* 光标样式变体 */
.xterm-cursor.xterm-cursor-block {
    background-color: var(--text-accent) !important;
    height: 1.2em;
    width: 1ch;
}

.xterm-cursor.xterm-cursor-outline {
    background-color: transparent !important;
    border: 1px solid var(--text-accent) !important;
    box-sizing: border-box;
    height: 1.2em;
    width: 1ch;
}

.xterm-cursor.xterm-cursor-bar {
    background-color: var(--text-accent) !important;
    width: 1px !important;
    height: 1.2em;
}

.xterm-cursor.xterm-cursor-underline {
    background-color: transparent !important;
    border-bottom: 1px solid var(--text-accent) !important;
    height: 1px !important;
    bottom: 0;
    width: 1ch;
}

/* ==================== 文本和渲染层 ==================== */

/* 文本层 */
.xterm-text-layer {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
    color: var(--text-normal);
    font-family: var(--font-monospace);
    font-size: 14px;
    line-height: 1.2;
    contain: strict;
}

/* 链接层 */
.xterm-link-layer {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
}

/* 选择层 */
.xterm-selection-layer {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

/* 选择文本样式 */
.xterm-selection {
    position: absolute;
    background-color: var(--text-selection) !important;
    opacity: 0.3 !important;
}

/* ==================== Canvas 渲染器样式 ==================== */

.xterm-canvas {
    position: absolute;
    top: 0;
    left: 0;
}

/* ==================== 滚动条样式 ==================== */

.xterm-viewport::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

.xterm-viewport::-webkit-scrollbar-track {
    background: var(--background-secondary);
}

.xterm-viewport::-webkit-scrollbar-thumb {
    background: var(--background-modifier-border);
    border-radius: 5px;
}

.xterm-viewport::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

.xterm-viewport::-webkit-scrollbar-corner {
    background: var(--background-secondary);
}

/* ==================== 链接样式 ==================== */

.xterm-link {
    cursor: pointer;
    text-decoration: underline;
    color: var(--text-accent);
}

.xterm-link:hover {
    text-decoration: underline;
    color: var(--text-accent-hover);
}

/* ==================== 错误和状态消息 ==================== */

.terminal-error-message {
    padding: 12px;
    margin: 8px;
    background-color: var(--background-modifier-error);
    border: 1px solid var(--background-modifier-error-border);
    border-radius: 4px;
    color: var(--text-error);
    font-family: var(--font-monospace);
    font-size: 13px;
}

.terminal-exit-message {
    padding: 12px;
    margin: 8px;
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    color: var(--text-muted);
    font-family: var(--font-monospace);
    font-size: 13px;
}

/* ==================== 主题兼容性 ==================== */

.theme-dark .terminal-view-container,
.theme-dark .terminal-container {
    background-color: #1e1e1e;
}

.theme-dark .xterm-text-layer {
    color: #d4d4d4;
}

.theme-dark .xterm-cursor {
    background-color: #aeafad !important;
}

.theme-light .terminal-view-container,
.theme-light .terminal-container {
    background-color: #ffffff;
}

.theme-light .xterm-text-layer {
    color: #000000;
}

.theme-light .xterm-cursor {
    background-color: #000000 !important;
}

/* ==================== 焦点样式 ==================== */

.xterm:focus {
    outline: none;
}

.xterm.focus .xterm-cursor {
    opacity: 1 !important;
}

.xterm:not(.focus) .xterm-cursor {
    opacity: 0.5;
}

/* ==================== 响应式设计 ==================== */

@media (max-width: 768px) {
    .terminal-container {
        padding: 0;
    }
    
    .terminal-error-message,
    .terminal-exit-message {
        margin: 4px;
        padding: 8px;
        font-size: 12px;
    }
    
    .xterm-text-layer {
        font-size: 12px;
    }
}

/* ==================== 性能优化 ==================== */

.xterm-rows {
    will-change: transform;
}

.xterm-cursor-layer,
.xterm-text-layer,
.xterm-selection-layer,
.xterm-link-layer {
    contain: strict;
}
